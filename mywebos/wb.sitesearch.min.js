/* Copyright Pablo Software solutions 2018 - http://www.wysiwygwebbuilder.com */
var searchDatabase=new SearchDatabase,searchCurrentPage=0;function searchParseURL(e){var c=decodeURIComponent(window.location.href);if(0<c.indexOf("?")){var f="";c=c.split("?")[1].split("&");for(var a=0;a<c.length;a++){var d=c[a].split("=");if("q"==d[0]){f=unescape(d[1]);break}}""!=f&&(document.getElementById(e).value=f,searchPage(""))}}
function get_context(e,c,f){var a=f/2-2,d="",p=j=0,h=-1,A=e.length;for(i=c=e.toLowerCase().indexOf(c);i<A;i++)if(i==c&&(h<i-a-1?d+="... "+e.substr(i-a,a):(a+=(h-i+a+1)/2,d+=e.substr(h+1,i-h-1)),h=i-1,p++,j=1),0<j&&(d+=e.substr(i,1),h++,j++," "==e.substr(i,1))){if(i+4<A){if(j>a&&1<=p||d.length>f){d+=" ...";break}}else j-=4;j>a&&(j=0)}return d}
function searchPaginate(e,c,f){var a=$("#search-pagination");a.find("li").eq(searchCurrentPage+1).addClass("active").siblings().removeClass("active");var d=a.find("li:first-child");a=a.find("li:last-child");0==searchCurrentPage?d.addClass("disabled"):d.removeClass("disabled");searchCurrentPage==c-1?a.addClass("disabled"):a.removeClass("disabled");$("#"+e).find(".search-item").hide().slice(searchCurrentPage*f,(searchCurrentPage+1)*f).show()}
function searchResults(e,c,f,a,d,p,h,A,m,n,u,g){searchCurrentPage=0;var b="",v=(new Date).getTime(),k=document.getElementById(e);if(0!=k.value.length||" "!=k.value){var l={},r=0;k=unescape(k.value);var q=k.split(" ");if(k.match('^"')&&k.match('"$')||k.match("^'")&&k.match("'$"))k=k.substring(1,k.length-1),q=[k];for(var x=r=0;x<database_length;x++){for(var y=0,B=searchDatabase[x].title+" "+searchDatabase[x].description+" "+searchDatabase[x].keywords,z=0;z<q.length;z++){var w=new RegExp(q[z],"i");w=
B.search(w);0<=w?y++:q[z].match("^-")?(w=new RegExp(q[z].substring(1),"i"),w=B.search(w),0<=w?y=0:y++):y=0}y==q.length&&(l[r++]=searchDatabase[x])}if("mobile"==c){""!=u&&(b=b+'<li data-role="list-divider">'+r+u+k,b+="</li>");for(g=0;g<r;g++)b=b+'<li><a href="'+l[g].url+'" target="'+m+'"><h3>'+l[g].title+"</h3>",d&&(b=b+"<p>"+l[g].description+"</p>"),p&&(b=b+"<p>"+l[g].keywords+"</p>"),b+="</a></li>";0==r&&(b="<li>"+noResults+"</li>");$("#"+e+"_results").html(b);$("#"+e+"_results").listview("refresh")}else if(0==
r)b+='<div class="search-text">',b+=n,b+="</div>";else for(""!=u&&(b+='<div class="search-text">',b=b+r+u+k,h&&(e=(new Date).getTime(),b+=" (",b+=((e-v)/1E3).toFixed(2),b+=" ",b+=g,b+=")"),b+="</div>"),g=0;g<r;g++){b+='<div class="search-item">';b=b+'<a class="search-title" href="'+l[g].url+'" target="'+m+'">'+l[g].title+"</a>";A&&(b+="<br>",b=b+'<a class="search-url" href="'+l[g].url+'" target="'+m+'">'+l[g].url+"</a>");d&&""!=l[g].description&&(b+="<br>",b+=l[g].description);if(p&&""!=l[g].keywords){e=
l[g].keywords;e=k.toLowerCase().split(" ");e=get_context(l[g].keywords,e[0],f);for(v=0;v<q.length;v++)q[v]=q[v].replace("*",""),e=e.replace(new RegExp("("+q[v]+")","gi"),'<span class="search-highlight">$1</span>');b+="<br>";b+=e}b+="</div>"}var t=1;0<a&&(t=Math.ceil(r/a),1<t&&(b+='<ul id="search-pagination"><li><a href="#">&laquo;</a></li><li><a href="#">&raquo;</a></li></ul>'));$("#"+c).html(b);if(1<t){f=$("#search-pagination");for(d=0;d<t;d++)p="<a>"+(d+1)+"</a>",$("<li></li>").html(p).bind("click",
{newPage:d},function(b){searchCurrentPage=b.data.newPage;searchPaginate(c,t,a)}).appendTo(f).addClass("clickable");f.find("li").eq(1).appendTo(f);f.find("li:first-child").click(function(){0<searchCurrentPage&&searchCurrentPage--;searchPaginate(c,t,a)});f.find("li:last-child").click(function(){searchCurrentPage<t-1&&searchCurrentPage++;searchPaginate(c,t,a)});searchPaginate(c,t,a)}}}
function searchAutoComplete(e){var c=$("#"+e),f=$('<ul class="search-autocomplete"></ul>').hide().insertAfter(c),a=null,d=function(d){a=d;null===a?f.hide():(0>a&&(a=0),a>=f.find("li").length&&(a=f.find("li").length-1),f.find("li").removeClass("selected").eq(a).addClass("selected"),f.css("left",c.position().left),f.css("top",c.position().top+c.outerHeight()),f.show())},p=function(){c.val(f.find("li").eq(a).text());d(null)};c.attr("autocomplete","off").keyup(function(h){if(40<h.keyCode||8==h.keyCode){h=
[];var e=c.val();e=e.toLowerCase();for(n=0;n<database_length;n++){var m=(searchDatabase[n].title+" "+searchDatabase[n].description+" "+searchDatabase[n].keywords).toLowerCase().split(" ");h=$.merge(h,m)}m=[];var n=0;a:for(;n<h.length;n++){for(var u=0;u<m.length;u++)if(m[u]==h[n])continue a;m[m.length]=h[n]}m.sort();if(e.length&&m.length){f.empty();var g=0;$.each(m,function(a,c){c=c.toLowerCase();0==c.indexOf(e)&&($("<li></li>").text(c).data("item",g).appendTo(f).mouseover(function(){var a=$(this).data("item");
d(a)}).click(p),g++)});d(0)}else d(null)}else 38==h.keyCode&&null!==a?(d(a-1),h.preventDefault()):40==h.keyCode&&null!==a?(d(a+1),h.preventDefault()):27==h.keyCode&&null!==a&&d(null)}).keypress(function(c){13==c.keyCode&&null!==a&&(p(),c.preventDefault())}).blur(function(a){setTimeout(function(){d(null)},250)})};